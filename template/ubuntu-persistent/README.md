# Ubuntu Persistent

## 应用说明

本应用基于 `phusion/baseimage` 构建，所有初始系统数据放在 `/template`，首次启动时会自动同步到挂载的存储卷中，没有挂载的目录容器重启后会丢失数据。

## SSH

应用安装后，在应用商店的应用资源管理页面可以看到 SSH 对外映射的端口。

应用默认关闭密码登录，允许 root 登录。

如果安装应用时没有输入公钥，则需要在网页上开启终端进入后自行添加。

## Tailscale

容器中默认开启了 Tailscale 服务，但没有配置账号，需要在终端内自行登录。
利用 `--ssh` 参数可以省去前面 SSH 公钥的配置。

## 重启

`reboot/poweroff/shutdown` 命令在容器内都会失效，命令行重启容器需要通过 `kill 1` 来实现。

## 系统升级

如果需要升级或者重置系统，直接删除 `/usr` 目录，然后重启容器即可重新同步 `/template`。
同步时，`/root` `/home` 中已有的文件会被保留，其他文件都会被删除。
